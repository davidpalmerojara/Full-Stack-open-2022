{"ast":null,"code":"var _jsxFileName = \"/Users/dapalmer/Documents/Projects/Full-Stack-open-2022/part3/phonebook/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport phoneService from './services/phoneServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [success, setSuccess] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    phoneService.getAll().then(allPersons => {\n      setPersons(allPersons);\n    }).catch(err => {\n      console.log(err);\n      setError('Could not load data from the server');\n    });\n  }, []);\n  const handleForm = e => {\n    e.preventDefault();\n    const update = persons.some(person => person.name.toLowerCase() === newName.toLowerCase());\n    console.log(update);\n    update ? updatePerson() : addPerson();\n    setNewName('');\n    setNewNumber('');\n  };\n  const addPerson = () => {\n    const person = {\n      name: newName,\n      number: newNumber\n    };\n    phoneService.create(person).then(newPerson => {\n      setPersons([...persons, newPerson]);\n      setSuccess(`User ${person.name} was added succesfully`);\n      setTimeout(() => setSuccess(null), 3000);\n    }).catch(err => {\n      console.log(err);\n      setError(err.response.data.error);\n      setTimeout(() => setError(null), 3000);\n    });\n  };\n  const updatePerson = () => {\n    const person = {\n      name: newName,\n      number: newNumber\n    };\n    const {\n      id\n    } = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n    const confirm = window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`);\n    const handleForm = e => {\n      e.preventDefault();\n      const update = persons.some(person => person.name.toLowerCase() === newName.toLowerCase());\n      if (update) updatePerson();else addPerson();\n      setNewName('');\n      setNewNumber('');\n    };\n    if (confirm) {\n      phoneService.update(id, person).then(res => {\n        setPersons(persons.map(person => person.id !== id ? person : res));\n        setSuccess(`User ${person.name} was updated succesfully`);\n        setTimeout(() => setSuccess(null), 3000);\n      }).catch(err => {\n        console.log(err);\n        setError(`Information of ${person.name} has already been removed from server`);\n        setTimeout(() => setError(null), 3000);\n      });\n    }\n  };\n  const deletePerson = id => {\n    const {\n      name\n    } = persons.find(person => person.id === id);\n    const confirm = window.confirm(`Delete ${name}?`);\n    if (confirm) {\n      phoneService.deleteNumber(id).then(res => {\n        setPersons(persons.filter(person => person.id !== id));\n        setSuccess('User was deleted succesfully');\n        setTimeout(() => setSuccess(null), 3000);\n      }).catch(err => {\n        setError(`Information of ${name} has already been removed from server`);\n        setTimeout(() => setError(null), 3000);\n      });\n    }\n  };\n  const handleNameChange = e => {\n    setNewName(e.target.value);\n  };\n  const handleNumberChange = e => {\n    setNewNumber(e.target.value);\n  };\n  const handleSearchChange = e => {\n    setSearchTerm(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen w-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"border border-gray-200 px-2 sm:px-4 py-2 mb-10 flex flex-col md:flex-row justify-between md:items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold\",\n        children: \"Phonebook\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Filter, {\n        searchTerm: searchTerm,\n        handleSearchChange: handleSearchChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 grid-rows-2 md:grid-cols-5 md:grid-rows-1 md:gap-20 gap-8 m-4\",\n      children: [/*#__PURE__*/_jsxDEV(PersonForm, {\n        handleForm: handleForm,\n        newName: newName,\n        handleNameChange: handleNameChange,\n        newNumber: newNumber,\n        handleNumberChange: handleNumberChange,\n        success: success,\n        error: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Persons, {\n        handleSearchChange: handleSearchChange,\n        persons: persons,\n        searchTerm: searchTerm,\n        deletePerson: deletePerson\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"n6Uq0a/Ps3f9bB48u/Cly5e/Odo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Filter","PersonForm","Persons","phoneService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchTerm","setSearchTerm","success","setSuccess","error","setError","getAll","then","allPersons","catch","err","console","log","handleForm","e","preventDefault","update","some","person","name","toLowerCase","updatePerson","addPerson","number","create","newPerson","setTimeout","response","data","id","find","confirm","window","res","map","deletePerson","deleteNumber","filter","handleNameChange","target","value","handleNumberChange","handleSearchChange"],"sources":["/Users/dapalmer/Documents/Projects/Full-Stack-open-2022/part3/phonebook/frontend/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport phoneService from './services/phoneServices'\n\nfunction App() {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [success, setSuccess] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    phoneService\n      .getAll()\n      .then((allPersons) => {\n        setPersons(allPersons)\n      })\n      .catch((err) => {\n        console.log(err)\n        setError('Could not load data from the server')\n      })\n  }, [])\n\n  const handleForm = (e) => {\n    e.preventDefault()\n    const update = persons.some((person) => person.name.toLowerCase() === newName.toLowerCase())\n    console.log(update)\n    update ? updatePerson() : addPerson()\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const addPerson = () => {\n    const person = { name: newName, number: newNumber }\n\n    phoneService\n      .create(person)\n      .then((newPerson) => {\n        setPersons([...persons, newPerson])\n        setSuccess(`User ${person.name} was added succesfully`)\n        setTimeout(() => setSuccess(null), 3000)\n      })\n      .catch((err) => {\n        console.log(err)\n        setError(err.response.data.error)\n        setTimeout(() => setError(null), 3000)\n      })\n  }\n\n  const updatePerson = () => {\n    const person = { name: newName, number: newNumber }\n    const { id } = persons.find((person) => person.name.toLowerCase() === newName.toLowerCase())\n    const confirm = window.confirm(\n      `${newName} is already added to phonebook, replace the old number with new one?`\n    )\n\n    const handleForm = (e) => {\n      e.preventDefault()\n      const update = persons.some((person) => person.name.toLowerCase() === newName.toLowerCase())\n\n      if (update) updatePerson()\n      else addPerson()\n\n      setNewName('')\n      setNewNumber('')\n    }\n\n    if (confirm) {\n      phoneService\n        .update(id, person)\n        .then((res) => {\n          setPersons(persons.map((person) => (person.id !== id ? person : res)))\n          setSuccess(`User ${person.name} was updated succesfully`)\n          setTimeout(() => setSuccess(null), 3000)\n        })\n        .catch((err) => {\n          console.log(err)\n          setError(`Information of ${person.name} has already been removed from server`)\n          setTimeout(() => setError(null), 3000)\n        })\n    }\n  }\n\n  const deletePerson = (id) => {\n    const { name } = persons.find((person) => person.id === id)\n    const confirm = window.confirm(`Delete ${name}?`)\n\n    if (confirm) {\n      phoneService\n        .deleteNumber(id)\n        .then((res) => {\n          setPersons(persons.filter((person) => person.id !== id))\n          setSuccess('User was deleted succesfully')\n          setTimeout(() => setSuccess(null), 3000)\n        })\n        .catch((err) => {\n          setError(`Information of ${name} has already been removed from server`)\n          setTimeout(() => setError(null), 3000)\n        })\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleSearchChange = (e) => {\n    setSearchTerm(e.target.value)\n  }\n\n  return (\n    <div className='h-screen w-screen'>\n      <nav className='border border-gray-200 px-2 sm:px-4 py-2 mb-10 flex flex-col md:flex-row justify-between md:items-center'>\n        <h1 className='text-3xl font-bold'>Phonebook</h1>\n        <Filter\n          searchTerm={searchTerm}\n          handleSearchChange={handleSearchChange}\n        />\n      </nav>\n      <div className='grid grid-cols-1 grid-rows-2 md:grid-cols-5 md:grid-rows-1 md:gap-20 gap-8 m-4'>\n        <PersonForm\n          handleForm={handleForm}\n          newName={newName}\n          handleNameChange={handleNameChange}\n          newNumber={newNumber}\n          handleNumberChange={handleNumberChange}\n          success={success}\n          error={error}\n        />\n        <Persons\n          handleSearchChange={handleSearchChange}\n          persons={persons}\n          searchTerm={searchTerm}\n          deletePerson={deletePerson}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}