{"ast":null,"code":"import _toConsumableArray from\"/Users/dapalmer/Documents/Projects/Full-Stack-open-2022/part3/phonebook/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/dapalmer/Documents/Projects/Full-Stack-open-2022/part3/phonebook/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import Persons from'./components/Persons';import phoneService from'./services/phoneServices';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchTerm=_useState8[0],setSearchTerm=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];useEffect(function(){phoneService.getAll().then(function(allPersons){setPersons(allPersons);}).catch(function(err){console.log(err);setError('Could not load data from the server');});},[]);var handleForm=function handleForm(e){e.preventDefault();var update=persons.some(function(person){return person.name.toLowerCase()===newName.toLowerCase();});console.log(update);if(update){updatePerson();}else{addPerson();}};var addPerson=function addPerson(){var person={name:newName,number:newNumber};phoneService.create(person).then(function(newPerson){setPersons([].concat(_toConsumableArray(persons),[newPerson]));setSuccess(\"User \".concat(person.name,\" was added succesfully\"));setTimeout(function(){return setSuccess(null);},3000);}).catch(function(err){console.log(err);setError(err.response.data.error);setTimeout(function(){return setError(null);},3000);});};var updatePerson=function updatePerson(){var person={name:newName,number:newNumber};var _persons$find=persons.find(function(person){return person.name.toLowerCase()===newName.toLowerCase();}),id=_persons$find.id;var confirm=window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with new one?\"));if(confirm){phoneService.update(id,person).then(function(res){setPersons(persons.map(function(person){return person.id!==id?person:res;}));setSuccess(\"User \".concat(person.name,\" was updated succesfully\"));setTimeout(function(){return setSuccess(null);},3000);}).catch(function(err){console.log(err);setError(\"Information of \".concat(person.name,\" has already been removed from server\"));setTimeout(function(){return setError(null);},3000);});}};var deletePerson=function deletePerson(id){var _persons$find2=persons.find(function(person){return person.id===id;}),name=_persons$find2.name;var confirm=window.confirm(\"Delete \".concat(name,\"?\"));if(confirm){phoneService.deleteNumber(id).then(function(res){setPersons(persons.filter(function(person){return person.id!==id;}));setSuccess('User was deleted succesfully');setTimeout(function(){return setSuccess(null);},3000);}).catch(function(err){setError(\"Information of \".concat(name,\" has already been removed from server\"));setTimeout(function(){return setError(null);},3000);});}};var handleNameChange=function handleNameChange(e){setNewName(e.target.value);};var handleNumberChange=function handleNumberChange(e){setNewNumber(e.target.value);};var handleSearchChange=function handleSearchChange(e){setSearchTerm(e.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-screen\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"border border-gray-200 px-2 sm:px-4 py-2 mb-10 flex flex-col md:flex-row justify-between md:items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold\",children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{searchTerm:searchTerm,handleSearchChange:handleSearchChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 grid-rows-2 md:grid-cols-5 md:grid-rows-1 md:gap-20 gap-8 m-4\",children:[/*#__PURE__*/_jsx(PersonForm,{handleForm:handleForm,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange,success:success,error:error}),/*#__PURE__*/_jsx(Persons,{handleSearchChange:handleSearchChange,persons:persons,searchTerm:searchTerm,deletePerson:deletePerson})]})]});}export default App;","map":{"version":3,"names":["useEffect","useState","Filter","PersonForm","Persons","phoneService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchTerm","setSearchTerm","success","setSuccess","error","setError","getAll","then","allPersons","catch","err","console","log","handleForm","e","preventDefault","update","some","person","name","toLowerCase","updatePerson","addPerson","number","create","newPerson","setTimeout","response","data","find","id","confirm","window","res","map","deletePerson","deleteNumber","filter","handleNameChange","target","value","handleNumberChange","handleSearchChange"],"sources":["/Users/dapalmer/Documents/Projects/Full-Stack-open-2022/part3/phonebook/frontend/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport phoneService from './services/phoneServices'\n\nfunction App() {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [success, setSuccess] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    phoneService\n      .getAll()\n      .then((allPersons) => {\n        setPersons(allPersons)\n      })\n      .catch((err) => {\n        console.log(err)\n        setError('Could not load data from the server')\n      })\n  }, [])\n\n  const handleForm = (e) => {\n    e.preventDefault()\n    const update = persons.some((person) => person.name.toLowerCase() === newName.toLowerCase())\n    console.log(update)\n\n    if (update) {\n      updatePerson()\n    } else {\n      addPerson()\n    }\n  }\n\n  const addPerson = () => {\n    const person = { name: newName, number: newNumber }\n\n    phoneService\n      .create(person)\n      .then((newPerson) => {\n        setPersons([...persons, newPerson])\n        setSuccess(`User ${person.name} was added succesfully`)\n        setTimeout(() => setSuccess(null), 3000)\n      })\n      .catch((err) => {\n        console.log(err)\n        setError(err.response.data.error)\n        setTimeout(() => setError(null), 3000)\n      })\n  }\n\n  const updatePerson = () => {\n    const person = { name: newName, number: newNumber }\n    const { id } = persons.find((person) => person.name.toLowerCase() === newName.toLowerCase())\n    const confirm = window.confirm(\n      `${newName} is already added to phonebook, replace the old number with new one?`\n    )\n\n    if (confirm) {\n      phoneService\n        .update(id, person)\n        .then((res) => {\n          setPersons(persons.map((person) => (person.id !== id ? person : res)))\n          setSuccess(`User ${person.name} was updated succesfully`)\n          setTimeout(() => setSuccess(null), 3000)\n        })\n        .catch((err) => {\n          console.log(err)\n          setError(`Information of ${person.name} has already been removed from server`)\n          setTimeout(() => setError(null), 3000)\n        })\n    }\n  }\n\n  const deletePerson = (id) => {\n    const { name } = persons.find((person) => person.id === id)\n    const confirm = window.confirm(`Delete ${name}?`)\n\n    if (confirm) {\n      phoneService\n        .deleteNumber(id)\n        .then((res) => {\n          setPersons(persons.filter((person) => person.id !== id))\n          setSuccess('User was deleted succesfully')\n          setTimeout(() => setSuccess(null), 3000)\n        })\n        .catch((err) => {\n          setError(`Information of ${name} has already been removed from server`)\n          setTimeout(() => setError(null), 3000)\n        })\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleSearchChange = (e) => {\n    setSearchTerm(e.target.value)\n  }\n\n  return (\n    <div className='h-screen w-screen'>\n      <nav className='border border-gray-200 px-2 sm:px-4 py-2 mb-10 flex flex-col md:flex-row justify-between md:items-center'>\n        <h1 className='text-3xl font-bold'>Phonebook</h1>\n        <Filter\n          searchTerm={searchTerm}\n          handleSearchChange={handleSearchChange}\n        />\n      </nav>\n      <div className='grid grid-cols-1 grid-rows-2 md:grid-cols-5 md:grid-rows-1 md:gap-20 gap-8 m-4'>\n        <PersonForm\n          handleForm={handleForm}\n          newName={newName}\n          handleNameChange={handleNameChange}\n          newNumber={newNumber}\n          handleNumberChange={handleNumberChange}\n          success={success}\n          error={error}\n        />\n        <Persons\n          handleSearchChange={handleSearchChange}\n          persons={persons}\n          searchTerm={searchTerm}\n          deletePerson={deletePerson}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}